(this["webpackJsonpnavbar-dropdown-v1"]=this["webpackJsonpnavbar-dropdown-v1"]||[]).push([[0],{164:function(e,t,a){},188:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},373:function(e,t,a){},389:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(25),i=a.n(c),r=(a(265),a(106)),l=a(476),o=a(481),d=a(475),u=a(477),h=a(227),j=a(226),b=(a(164),a(35)),f=a(36),p=a(19),m=a(38),O=a(37),x=a(30),v=null!==localStorage.getItem("token"),g=null===localStorage.getItem("role")?null:localStorage.getItem("role"),_=a(3),N=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(p.a)(s)),s.state={clicked:!1},s}return Object(f.a)(a,[{key:"handleClick",value:function(){this.setState({clicked:!this.state.clicked}),v&&(localStorage.clear(),window.location.reload(!0))}},{key:"render",value:function(){return Object(_.jsx)(x.b,{to:v?"/":"connection",children:Object(_.jsx)("button",{className:"btn",onClick:this.handleClick,children:v?"SE DECONNECTER":"CONNEXION"})})}}]),a}(n.a.Component),k=(a(188),a.p,a(89));var S=function(){var e=Object(s.useState)(!0),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),i=Object(r.a)(c,2),b=i[0],f=i[1];return Object(_.jsxs)(l.a,{bg:"white",expand:"lg",fixed:"top",style:{padding:"0"},children:[Object(_.jsxs)(l.a.Brand,{href:"/",className:"content_logo",children:["        ",Object(_.jsx)(k.a,{children:Object(_.jsx)("img",{width:170,height:70,className:"mr-3",src:"https://www.gainde2000.com/wp-content/uploads/2017/11/logo_Gainde.png",alt:""})})]}),Object(_.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(_.jsxs)(o.a,{className:"ml-auto",children:[Object(_.jsx)(o.a.Link,{href:"/",className:"menu-item",children:"ACCUEIL"}),Object(_.jsx)(o.a.Link,{href:"#link",className:"menu-item",children:"ACTUALITE"}),Object(_.jsxs)(d.a,{title:"CONSULTATION",id:"consultation",className:"basic-nav-dropdown menu-item",show:b,onMouseEnter:function(){f(!0)},onMouseLeave:function(){f(!1)},children:[Object(_.jsx)(d.a.Item,{className:"item",href:"#action/3.1",children:"PLAN DE PASSATION"}),Object(_.jsx)(d.a.Item,{className:"item",href:"",children:"AVIS G\xc9N\xc9RAUX"}),Object(_.jsx)(d.a.Item,{className:"item",href:"appels-doffres",children:"AVIS D'APPEL A CONCURRENCE"}),Object(_.jsx)(d.a.Item,{className:"item",href:"",children:"PROC\xc9S VERBAL D'OUVERTURE"}),Object(_.jsx)(d.a.Item,{className:"item",href:"",children:"AVIS D'ATTRIBUTION D\xc9FINITIVE"}),Object(_.jsx)(d.a.Item,{className:"item",href:"",children:"JOURNAL DES MARCH\xc9S PUBLICS"}),Object(_.jsx)(d.a.Item,{href:"#action/3.3",children:"CONTENTIEUX"}),Object(_.jsx)(d.a.Item,{href:"#action/3.4",children:"LISTE ROUGE"})]}),Object(_.jsx)(d.a,{title:"OUTILS DE GESTION",className:"basic-nav-dropdown menu-item"}),Object(_.jsx)(d.a,{title:"ORGANES",className:"basic-nav-dropdown menu-item"}),Object(_.jsx)(d.a,{title:"RAPPORT",className:"basic-nav-dropdown menu-item"}),Object(_.jsxs)(u.a,{inline:!0,children:[Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)(N,{}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),v&&"ROLE_ABONNE"!==g?Object(_.jsx)(x.b,{to:"/dashbord",children:Object(_.jsx)("button",{className:"btn",children:"DASHBORD"})}):null,Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)(h.a,{type:"text",placeholder:"Rechercher",className:"ml-2 ",hidden:a}),Object(_.jsx)(j.a,{variant:"search",onClick:function(){n(!a)},className:"ml-2 search-icon text-white ",children:Object(_.jsx)("i",{className:"fas fa-search "})})]})]})})]})},C=(a(82),a(9)),w=a.n(C),y=a(10),E=a(17);a(274);a.p,a.p,a.p;var A="https://mpublics.herokuapp.com/api/",D=(a(275),a(71));var L=function(){return Object(_.jsxs)("div",{className:"main_footer",children:[v?Object(_.jsx)("div",{className:"footer_newsletter_div",style:{backgroundColor:"white"}}):Object(_.jsxs)("div",{className:"footer_newsletter_div",children:[Object(_.jsx)("div",{className:"news_letter_text_div",children:Object(_.jsx)("h1",{className:"newsletter_txt",children:"Newsletter"})}),Object(_.jsxs)("center",{children:[Object(_.jsx)("div",{className:"abonn_div",children:Object(_.jsx)("p",{className:"abonn_txt",children:"Abonnez-vous \xe0 notre newsletter mensuelle pour vous tenir inform\xe9 de l'actualit\xe9 des march\xe9s publics"})}),Object(_.jsx)("center",{children:Object(_.jsxs)("div",{className:"champ_abonn_div",children:[Object(_.jsx)("input",{className:"champ_email",placeholder:"Entrez votre adresse Email"}),Object(_.jsx)("button",{className:"btn_sinscrire",children:"S'inscrire"})]})})]})]}),Object(_.jsxs)("div",{className:"footer_menu_div",children:[Object(_.jsxs)("div",{className:"logo_div",children:[Object(_.jsx)("div",{className:"space_footer"}),Object(_.jsx)("div",{className:"logo_div_img",children:Object(_.jsx)("div",{className:"logo_footer",children:Object(_.jsx)(k.a,{children:Object(_.jsx)("img",{width:170,height:70,className:"mr-3",src:"https://www.gainde2000.com/wp-content/uploads/2017/11/logo_Gainde.png",alt:""})})})}),Object(_.jsxs)("div",{className:"resaux_sociaux",children:[Object(_.jsx)("div",{className:"twitter",children:Object(_.jsx)(D.d,{color:"white"})}),Object(_.jsx)("div",{className:"facebook",children:Object(_.jsx)(D.c,{color:"white"})}),Object(_.jsx)("div",{className:"youtube",children:Object(_.jsx)(D.e,{color:"white"})})]})]}),Object(_.jsxs)("div",{className:"outilsgestion_div",children:[Object(_.jsx)("div",{className:"space_footer"}),Object(_.jsx)("div",{className:"menu_footer_div_tiltle",children:Object(_.jsx)("h2",{className:"menu_footer_text_tiltle",children:"OUTILS DE GESTION"})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Comprendre les march\xe9s publics"})}),Object(_.jsx)("a",{href:"https://www.sec.gouv.sn/sites/default/files/loisetdecrets/D%C3%A9cret%20n%C2%B0%202007-545%20du%2025%20avril%202007%20portant%20Code%20des%20march%C3%A9s%20publics.pdf",children:Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Code des march\xe9s 2007"})})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Code des march\xe9s 2009"})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"D\xe9nonciations anonymes"})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"FAQ"})})]}),Object(_.jsxs)("div",{className:"rapports_div",children:[Object(_.jsx)("div",{className:"space_footer"}),Object(_.jsx)("div",{className:"menu_footer_div_tiltle",children:Object(_.jsx)("h2",{className:"menu_footer_text_tiltle",children:"RAPPORTS"})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Rapports ARMP"})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Rapport d'audit"})})]}),Object(_.jsxs)("div",{className:"liens_div",children:[Object(_.jsx)("div",{className:"space_footer"}),Object(_.jsx)("div",{className:"menu_footer_div_tiltle",children:Object(_.jsx)("h2",{className:"menu_footer_text_tiltle",children:"LIENS UTILES"})}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("a",{href:"http://www.finances.gouv.sn/",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Minist\xe8re de l'\xe9conomie et des finances"})})}),Object(_.jsx)("a",{href:"https://www.afdb.org/fr",children:Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"BAD"})})}),Object(_.jsxs)("a",{href:"https://www.banquemondiale.org/fr/home",children:["   ",Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"Banque mondiale"})})]}),Object(_.jsx)("div",{className:"sous_mennu_footer_div",children:Object(_.jsx)("p",{className:"sous_menu_footer_txt",children:"D\xe9nonciations anonymes"})})]}),Object(_.jsx)("div",{className:"copyright",children:Object(_.jsx)("p",{className:"copyright_txt",children:"\xa9 Portail des March\xe9s Publics du S\xe9n\xe9gal | Copyright 2021"})}),Object(_.jsxs)("div",{className:"drapeau",children:[Object(_.jsx)("div",{className:"drapeau_vert"}),Object(_.jsx)("div",{className:"drapeau_jaune"}),Object(_.jsx)("div",{className:"drapeau_rouge"})]})]})]})},T=a(454),F=a(6),R=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).animationDuration=2e3,s.frameDuration=1e3/60,s.totalFrames=Math.round(s.animationDuration/s.frameDuration),s.easeOutQuad=function(e){return e*(2-e)},s.animateCountUp=function(e){var t=0,a=parseInt(e.innerHTML,10),n=setInterval((function(){t++;var c=s.easeOutQuad(t/s.totalFrames),i=Math.round(a*c);parseInt(e.innerHTML,10)!==i&&(e.innerHTML=i),t===s.totalFrames&&clearInterval(n)}),s.frameDuration)},s.runAnimations=function(){document.querySelectorAll(".val").forEach(s.animateCountUp)},s.handleResize=function(e){s.setState({windowWidth:window.innerWidth})},s.getOffres=Object(E.a)(w.a.mark((function e(){var t,a,n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"appel_offres",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({offres:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:0})})),isLoading:!1}),s.runAnimations(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 16:n=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()<new Date(e.limite).getTime()})),c=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()>=new Date(e.limite).getTime()})),s.setState({offresEnCours:n.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"en cours"})}))}),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.abs((s.state.dateDelai-new Date(e.limite))/864e5)})}))}})),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.round(1*e.delai)/1+1})}))}})),s.setState({offresExpire:c.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"expire"})}))}),s.setState({offres:s.state.offresEnCours.concat(s.state.offresExpire)}),s.setState({offresFiltre:s.state.offres}),console.log(s.state.offres);case 25:case"end":return e.stop()}}),e,null,[[0,12]])}))),s.state={offresEnCours:[],offresExpire:[],offres:[],offresFiltre:[],isLoading:null,dateDelai:new Date,windowWidth:window.innerWidth},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.getOffres()}},{key:"componentWillUnMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=new Date,a=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"background",children:[Object(_.jsx)("center",{children:Object(_.jsx)("h1",{className:"titre_page",style:{color:"#1E88E5"},children:"PORTAIL DES MARCH\xc9S PUBLICS DU S\xc9N\xc9GAL"})}),Object(_.jsx)("center",{children:Object(_.jsx)("h4",{className:"titre_page",style:{color:"black"},children:"La plateforme commune d'\xe9change entre les acheteurs et les fournissuers"})})]}),Object(_.jsxs)("div",{className:"chiffres",children:[Object(_.jsx)("div",{className:"passation",children:Object(_.jsxs)("p",{className:"titre_number",children:[Object(_.jsx)("span",{className:"val",children:"0"})," PLANS DE PASSATION"]})}),Object(_.jsx)("div",{className:"avisg",children:Object(_.jsxs)("p",{className:"titre_number",children:[Object(_.jsx)("span",{className:"val",children:"0"})," AVIS G\xc9N\xc9RAUX"]})}),Object(_.jsx)(x.b,{to:"/appels-doffres",children:Object(_.jsx)("div",{className:"concurrence",children:Object(_.jsxs)("p",{className:"titre_number",children:[Object(_.jsx)("span",{className:"val",children:this.state.offres.length})," AVIS D'APPEL \xc0 CONCURRENCE"]})})}),Object(_.jsx)("div",{className:"pv",children:Object(_.jsxs)("p",{className:"titre_number",children:[Object(_.jsx)("span",{className:"val",children:"0"})," PV D'ATTRIBUTION PROVISOIRE"]})})]}),Object(_.jsx)("center",{children:Object(_.jsxs)("div",{className:"dernieres_offres",style:{height:this.state.windowWidth<=900?1950:this.state.windowWidth<=1350?1300:650},children:[Object(_.jsx)("div",{className:"dernieres_offres_div"}),Object(_.jsxs)(F.s,{children:[this.state.loading,this.state.offres.slice(0,3).map((function(a,s){return Object(_.jsx)(F.h,{xs:e.state.windowWidth<=900?"12":e.state.windowWidth<=1350?"6":"4",children:Object(_.jsxs)("div",{className:"single_card_offre",style:{width:e.state.windowWidth<=900?e.state.windowWidth:400},children:[Object(_.jsxs)("div",{className:"card_title_div",children:[Object(_.jsxs)("div",{className:"card_title_ref",children:[Object(_.jsx)("div",{className:"ref_title_txt_div",children:Object(_.jsx)("h7",{className:"ref_title_txt",children:"R\xe9f\xe9rence"})}),Object(_.jsx)("div",{className:"ref_title_txt_value_div",children:Object(_.jsxs)("p",{className:"ref_title_txt_value",children:["a",a.ref]})})]}),Object(_.jsx)("div",{className:"card_title_delai",children:Object(_.jsx)("div",{className:"delai_bande",style:{backgroundColor:(new Date(a.limite.slice(0,10)).getTime()-t.getTime())/864e5<=0?"#E63009":Math.trunc((new Date(a.limite.slice(0,10)).getTime()-t.getTime())/864e5)<=3?"#E2B13C":"#2EAB82"},children:(new Date(a.limite.slice(0,10)).getTime()-t.getTime())/864e5>0?Object(_.jsxs)("p",{className:"delai_offre_accueil_txt",children:["D\xe9lai ",Object(_.jsx)("br",{}),Math.trunc((new Date(a.limite.slice(0,10)).getTime()-t.getTime())/864e5)," jours"]}):Object(_.jsxs)("p",{className:"delai_offre_accueil_txt",children:["D\xe9lai ",Object(_.jsx)("br",{}),"expir\xe9"]})})})]}),Object(_.jsxs)("div",{className:"card_details_div",children:[Object(_.jsx)("div",{className:"object_title",children:Object(_.jsx)("h9",{className:"object_title_txt",children:"Objet"})}),Object(_.jsx)("div",{className:"object_details",children:Object(_.jsx)("p",{className:"object_txt_details",children:a.libelle})}),Object(_.jsx)("div",{className:"object_title",children:Object(_.jsx)("h9",{className:"object_title_txt",children:"Autorit\xe9 contractante"})}),Object(_.jsx)("div",{className:"autorite_details",children:Object(_.jsx)("p",{className:"autorite_txt_details",children:a.autorite.libelle})}),Object(_.jsx)("div",{className:"btn_consulter_favoris",children:Object(_.jsx)("div",{className:"btn_consulter_div",children:Object(_.jsx)(x.b,{to:"/appels-doffres",children:Object(_.jsx)("button",{className:"btn_consulter",children:"VOIR PLUS"})})})})]})]})})}))]})]})})]});return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(S,{}),Object(_.jsx)(T.a,{}),a,Object(_.jsx)(L,{})]})}}]),a}(n.a.Component),I=a(34);function P(){return Object(_.jsx)("h1",{className:"services",children:"SERVICES"})}function M(){return Object(_.jsx)("h1",{className:"products",children:"PRODUCTS"})}function U(){return Object(_.jsx)("h1",{className:"contact-us",children:"CONTACT"})}function z(){return Object(_.jsx)("h1",{className:"sign-up",children:"LIKE & SUBSCRIBE"})}a(283);function B(){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"background_passation"})})}a(284);var q=a(49),G=a(486),V=a(458),H=a(484),W=a(228),J=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).handleEmail=function(e){s.setState({email:e.target.value})},s.handleClick=function(){return function(){s.setState({open:""===s.state.email||""===s.state.password})}},s.handleClose=function(){s.setState({open:!1})},s.handleChecked=function(e){s.setState({checked:e.target.checked})},s.handleSubmit=function(){var e=Object(E.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation(),s.setState({validated:!0,passwordCheck:!0})),!0===s.state.open);else try{s.setState({isLoading:!0}),a={email:s.state.email,password:s.state.password},fetch("https://mpublics.herokuapp.com/api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return n=a&&a.message||t.status,e.abrupt("return",Promise.reject(n));case 6:c=Object(q.a)(a.token),i=c.roles,localStorage.setItem("token",a.token),localStorage.setItem("role",i),s.setState({isLoading:!1}),s.props.history.push("/appels-doffres"),window.location.reload(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){s.setState({failedAuth:!0}),s.setState({errorMessage:e.toString()}),console.error("There was an error!",e)}))}catch(n){console.log(n)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleChange=function(e){return function(e){s.setState({password:e.target.value})}},s.handleClickShowPassword=function(){s.setState({showPassword:!s.state.showPassword})},s.handleMouseDownPassword=function(e){e.preventDefault()},s.state={isLoading:!1,password:"",showPassword:!1,checked:!1,email:"",open:!1,failedAuth:!1,validated:!1,passwordCheck:!1},s}return Object(f.a)(a,[{key:"render",value:function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(S,{}),"(",Object(_.jsx)("div",{className:"connection_body",children:Object(_.jsxs)("center",{children:[Object(_.jsx)("div",{className:"height_space_connection_page"}),Object(_.jsxs)("div",{className:"connection_bande",children:[Object(_.jsx)("div",{className:"titre_connection_div",children:Object(_.jsx)("h3",{className:"titre_connection_txt",children:"AUTHENTIFICATION ESPACE ABONN\xc9S, ADMINISTRATEURS OU AUTORIT\xc9 CONTRACTANTES"})}),Object(_.jsx)("div",{className:"titre_sinscrire_div",children:Object(_.jsxs)("p",{className:"titre_sinscrire_txt",children:["Si vous \xeates ici pour la premi\xe8re fois, c'est le moment de ",Object(_.jsx)("a",{className:"txt_sinscrire",href:"inscription",children:"s'inscrire"})]})}),this.state.failedAuth?Object(_.jsx)("span",{className:"MuiFormHelperText-root helpertext",children:"Email ou mot de passe incorrect"}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("div",{className:"height_space_connection_page2"}),Object(_.jsx)("div",{className:"form_div",children:Object(_.jsxs)(u.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(_.jsxs)(u.a.Group,{as:W.a,controlId:"formGridEmail",children:[Object(_.jsx)(u.a.Label,{children:"Email"}),Object(_.jsx)(u.a.Control,{type:"email",value:this.state.email,required:!0,name:"email",onChange:this.handleEmail}),Object(_.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Renseignez votre email"})]}),Object(_.jsx)(u.a.Row,{children:Object(_.jsxs)(u.a.Group,{as:W.a,controlId:"formGridPassword",children:[Object(_.jsx)(u.a.Label,{className:"label_mdp",children:"Mot de passe"}),Object(_.jsx)(G.a,{name:"password",required:!0,className:"email",id:"filled-adornment-password",type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleChange("password"),endAdornment:Object(_.jsx)(V.a,{position:"end"})}),this.state.passwordCheck&&""===this.state.password?Object(_.jsx)("div",{className:"invalid-feedback",style:{display:"block"},children:"Renseignez votre mot de passe"}):Object(_.jsx)(_.Fragment,{})]})}),Object(_.jsxs)(u.a.Row,{children:[Object(_.jsx)(u.a.Group,{as:W.a,id:"formGridCheckbox",children:Object(_.jsx)(u.a.Check,{className:"checkbox",type:"checkbox",label:"Rester connect\xe9"})}),Object(_.jsx)(u.a.Group,{as:W.a,children:Object(_.jsx)("div",{className:"forgetpassword_div",children:Object(_.jsx)("h6",{className:"forgetpassword_div_txt",children:"Mot de passe oubli\xe9 ?"})})})]}),Object(_.jsx)(j.a,{type:"submit",className:"btn_seconnecter",onClick:this.handleClick(),children:"SE CONNECTER"}),Object(_.jsx)(H.a,{className:"snackbar",open:this.state.open,onClose:this.handleClose,message:"Tous les champs doivent \xeatre rempli"},"bottomcenter")]})})]})]})}),") }"]})}}]),a}(n.a.Component);function K(){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("h1",{className:"avis-generaux",children:"Avis generaux"})})}a(285);var Q=a(180),X=a(175),Y=a(72),Z=a.n(Y),$=a(478),ee=a(229),te=a(485),ae=a(472),se=a(470),ne=a(471),ce=a(469),ie=a(473),re=(a(286),a(287),a(461)),le=a(462),oe=a(463),de=a(464),ue=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).handleOpen=function(e){s.setState({open:!s.state.open})},s.handleShare=function(){s.setState({showSocialeButton:!s.state.showSocialeButton})},s.handleChangePage=function(e,t){s.setState({page:t})},s.handleChangeRowsPerPage=function(e){s.setState({rowsPerPage:parseInt(e.target.value,10)}),s.setState({page:0})},s.getDownloadFile=function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch(A+"download/"+t,{headers:{Accept:"Application/json"}}).then((function(e){return e.blob()})).then((function(e){return Object(ee.saveAs)(e,"Details.pdf")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.favoris=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i,r,l,o,d,u,h,j,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==v){e.next=47;break}if(a=localStorage.getItem("token"),n=Object(q.a)(a),c=n.username,"ROLE_ABONNE"!==g){e.next=45;break}return e.prev=5,e.next=8,fetch(A+"users?email="+c,{headers:{Accept:"Application/json"}});case 8:return i=e.sent,e.next=11,i.json();case 11:return r=e.sent,l=r.map((function(e){return e.id})),e.next=15,fetch(A+"abonnes?user_id.id="+l[0],{headers:{Accept:"Application/json"}});case 15:return o=e.sent,e.next=18,o.json();case 18:return d=e.sent,u=d.map((function(e){return e.id})),e.next=22,fetch(A+"favoris?abonne.id="+u+"&offre.id="+t,{headers:{Accept:"Application/json",Authorization:"Bearer "+a}});case 22:return h=e.sent,e.next=25,h.json();case 25:if(j=e.sent,console.log("favoris"),console.log(j),0!==j.length){e.next=36;break}return(b=new FormData).append("offre",t),b.append("abonne",u),e.next=34,fetch(A+"favoris/ajout",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+a},body:b}).then(function(){var e=Object(E.a)(w.a.mark((function e(t){var a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return s=a&&a.message||t.status,e.abrupt("return",Promise.reject(s));case 6:window.location.reload(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 34:e.next=39;break;case 36:return e.next=38,fetch(A+"favoris/"+j[0].id,{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer "+a}});case 38:window.location.reload(!1);case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(5),s.setState({isLoading:!1}),console.error(e.t0);case 45:e.next=48;break;case 47:s.setState({open:!0});case 48:case"end":return e.stop()}}),e,null,[[5,41]])})));return function(t){return e.apply(this,arguments)}}(),s.state={page:0,rowsPerPage:10,itemsPerPage:10,open:!1,showSocialeButton:!1},s}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.offres.slice(this.state.page*this.state.rowsPerPage,this.state.page*this.state.rowsPerPage+this.state.rowsPerPage),a=Object(_.jsxs)(_.Fragment,{children:[this.props.loading,t.map((function(t,a){return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"offre_elmt",style:{marginBottom:10},children:[Object(_.jsxs)("div",{className:"entete_offres",children:[Object(_.jsxs)("div",{className:"autorite_contractante",children:[Object(_.jsx)("div",{className:"autorite_contractante_div_title",children:Object(_.jsx)("h6",{className:"autorite_contractante_title",children:"AUTORIT\xc9 CONTRACTANTE"})}),Object(_.jsx)("div",{className:"autorite_contractante_div_value",children:Object(_.jsx)("p",{className:"autorite_contractante_variable",children:t.autorite.libelle})})]}),Object(_.jsxs)("div",{className:"date_limite ",style:{backgroundColor:0===t.delai?"#E63009":t.delai<=3?"#E2B13C":"#2EAB82"},children:[Object(_.jsx)("div",{className:"autorite_contractante_div_title ",children:Object(_.jsx)("h6",{className:"autorite_contractante_title",children:"DATE LIMITE DE D\xc9P\xd4T"})}),Object(_.jsx)("div",{className:"autorite_contractante_div_value",children:Object(_.jsx)("p",{className:"autorite_contractante_variable",children:Z()(t.limite,"dd-mm-yyyy")})})]}),Object(_.jsxs)("div",{className:"delai_offre",style:{backgroundColor:0===t.delai?"#AB270B":t.delai<=3?"#CCA341":"#26A279"},children:[Object(_.jsx)("div",{className:"autorite_contractante_div_title",children:Object(_.jsx)("h6",{className:"autorite_contractante_title",children:"D\xc9LAI"})}),Object(_.jsx)("div",{className:"autorite_contractante_div_value",children:Object(_.jsx)("p",{className:"autorite_contractante_variable",children:0===t.delai?"Expir\xe9":1===t.delai?"1 jour":t.delai+" jours"})})]})]}),Object(_.jsx)("div",{className:"description_offre",children:Object(_.jsx)("h3",{className:"description_value",children:t.libelle})}),Object(_.jsxs)("div",{className:"date_ref_infos",children:[Object(_.jsx)("div",{className:"date_publication_offre",children:Object(_.jsx)("h5",{className:"date_publi_txt",children:"Date de publication"})}),Object(_.jsx)("div",{className:"date_ouverture_offre",children:Object(_.jsx)("h5",{className:"date_publi_txt",children:"Date d'ouverture"})}),Object(_.jsx)("div",{className:"reference",children:Object(_.jsx)("h5",{className:"date_publi_txt",children:"Ref"})})]}),Object(_.jsxs)("div",{className:"date_ref_infos",children:[Object(_.jsx)("div",{className:"date_publication_offre",children:Object(_.jsx)("p",{className:"date_publi_txt_value",children:Z()(t.publication,"dd-mm-yyyy")})}),Object(_.jsx)("div",{className:"date_ouverture_offre",children:Object(_.jsx)("p",{className:"date_publi_txt_value",children:Z()(t.ouverture,"dd-mm-yyyy")})}),Object(_.jsx)("div",{className:"reference",children:Object(_.jsx)("p",{className:"date_publi_txt_value",children:t.ref})})]}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsx)("div",{className:"lieu_acquisition",children:Object(_.jsx)("h5",{className:"lieu_acquisition_txt",children:"Lieu d'acquisition du dossier"})}),Object(_.jsx)("div",{className:"lieu_acquisition_value",children:Object(_.jsx)("p",{className:"date_publi_txt_value",children:t.lieu})}),Object(_.jsxs)("div",{className:"favoris_download",children:[Object(_.jsx)("div",{className:"favoris_div",children:Object(_.jsx)("div",{className:!0===t.favoris?"favoris btn_favoris":"btn_favoris",children:Object(_.jsx)(X.a,{className:"icon_start",style:{color:!0===t.favoris?"white":"black"},size:"1.5em",onClick:function(){e.favoris(t.id)}})})}),Object(_.jsxs)("div",{className:"btn_download_share",children:[Object(_.jsx)("div",{className:"btn_download_div",children:Object(_.jsxs)("button",{className:"btn_download",onClick:function(){e.getDownloadFile(t.id)},children:[Object(_.jsx)("i",{className:"fas fa-download"}),"  T\xc9L\xc9CHARGER"]})}),Object(_.jsx)("div",{className:"btn_share_div",children:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(re.a,{windowWidth:"1",url:"https://orbusdigital.com/",quote:t.libelle,children:Object(_.jsx)(le.a,{size:40,iconFillColor:"white"})}),Object(_.jsx)(oe.a,{url:"https://orbusdigital.com/",quote:t.libelle,children:Object(_.jsx)(de.a,{size:40,iconFillColor:"white"})})]})})]})]})]}),Object(_.jsx)("div",{style:{height:"10px"}})]},a)})),Object(_.jsx)($.a,{className:"pagination",component:"div",count:this.props.offres.length,page:this.state.page,onChangePage:this.handleChangePage,rowsPerPage:this.state.rowsPerPage,rowsPerPageOptions:[5,10,25,50,100],onChangeRowsPerPage:this.handleChangeRowsPerPage})]});return Object(_.jsxs)(_.Fragment,{children:[a,Object(_.jsxs)(te.a,{open:this.state.open,onClose:this.handleOpen,children:[Object(_.jsx)(ce.a,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Vous devez \xeatre connect\xe9 comme abonn\xe9 pour ajouter des appels d'offres \xe0 votre liste de favoris!"}),Object(_.jsx)(se.a,{children:Object(_.jsx)(ne.a,{children:"Voulez-vous vous connecter?"})}),Object(_.jsxs)(ae.a,{children:[Object(_.jsx)(ie.a,{autoFocus:!0,href:"connection",color:"primary",children:"Oui"}),Object(_.jsx)(ie.a,{autoFocus:!0,onClick:this.handleOpen,color:"primary",children:"Non"})]})]})]})}}]),a}(n.a.Component),he=a(120),je=a.n(he),be=(a(290),a(482)),fe=a(480),pe=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).handleRecherche=function(e){s.setState({Recherche:e.currentTarget.value})},s.mesFvoris=function(){s.setState({offres:s.state.offresFav}),console.log("liste des offres favori"),console.log(s.state.offresFav)},s.handleDatedebut=function(e){s.setState({datedebut:e})},s.handleDatefin=function(e){s.setState({datefin:e})},s.handleDateLimiteDebut=function(e){s.setState({datelimit_debut:e})},s.handleDateLimiteFin=function(e){s.setState({datelimit_fin:e})},s.getOffresDatePublication=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s.handlereloadClicked(),a=Z()(s.state.datedebut,"yyyy-mm-dd"),n=Z()(s.state.datefin,"yyyy-mm-dd"),""===s.state.statut?0!==(c=s.state.offresFiltre.filter((function(e){return e.publication>=a&&e.publication<=n}))).length?s.setState({offres:c}):s.setState({offres:s.state.offresFiltre}):0!==(i=s.state.offresFiltre.filter((function(e){return e.publication>=a&&e.publication<=n&&e.statut===s.state.statut}))).length?s.setState({offres:i}):s.setState({offres:s.state.offresFiltre.filter((function(e){return e.statut===s.state.statut}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getOffresDateLimite=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s.handlereloadClicked(),a=Z()(s.state.datelimit_debut,"yyyy-mm-dd"),n=Z()(s.state.datelimit_fin,"yyyy-mm-dd"),console.log(a),console.log(n),""===s.state.statut?0!==(c=s.state.offres.filter((function(e){return e.limite>=a&&e.limite<=n}))).length?s.setState({offres:c}):s.setState({offres:s.state.offresFiltre}):0!==(i=s.state.offres.filter((function(e){return e.limite>=a&&e.limite<=n&&e.statut===s.state.statut}))).length?s.setState({offres:i}):s.setState({offres:s.state.offresFiltre.filter((function(e){return e.statut===s.state.statut}))});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleClickTypeMarche=function(){s.setState({typemarcheclicked:!s.state.typemarcheclicked})},s.handlereloadClicked=function(){s.setState({reloadClicked:!0})},s.handleClickAutorite=function(){s.setState({autoriteclicked:!s.state.autoriteclicked})},s.handleClickTypeAutorite=function(){s.setState({typeautoriteclicked:!s.state.typeautoriteclicked})},s.handleClickTous=function(){s.setState({tousClicked:!0}),s.setState({encoursClicked:!1}),s.setState({expireClicked:!1}),s.setState({initialStateEncours:!1})},s.handleClickExpire=function(){s.setState({tousClicked:!1}),s.setState({encoursClicked:!1}),s.setState({expireClicked:!0}),s.setState({initialStateEncours:!1})},s.handleClickEncours=function(){s.setState({tousClicked:!1}),s.setState({encoursClicked:!0}),s.setState({expireClicked:!1}),s.setState({initialStateEncours:!1})},s.handleClickAdminPublic=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.handlereloadClicked(),e.next=3,s.setState((function(e){return{autorites:e.autorites.map((function(e){return e.id===t?Object(y.a)(Object(y.a)({},e),{},{adminClicked:!e.adminClicked}):e})),offresFiltre:e.offresFiltre.map((function(e){return e.autorite.type_autorite.id===t?Object(y.a)(Object(y.a)({},e),{},{adminClicked:!e.adminClicked}):e})),autc:e.autc.map((function(e){return e.type_autorite.id===t?Object(y.a)(Object(y.a)({},e),{},{adminClicked:!e.adminClicked}):e}))}}));case 3:a=s.state.offres,0===s.state.offresFiltre.filter((function(e){return!0===e.fournitureClicked})).length?""===s.state.statut?0!==(n=s.state.offresFiltre.filter((function(e){return!0===e.adminClicked}))).length?s.setState({offres:n}):s.setState({offres:a}):0!==(c=s.state.offresFiltre.filter((function(e){return e.adminClicked&&e.statut===s.state.statut}))).length?s.setState({offres:c}):s.setState({offres:a}):""===s.state.statut?0!==(i=s.state.offresFiltre.filter((function(e){return!0===e.adminClicked&&!0===e.fournitureClicked}))).length?s.setState({offres:i}):s.setState({offres:a}):0!==(r=s.state.offresFiltre.filter((function(e){return e.adminClicked&&e.statut===s.state.statut&&!0===e.fournitureClicked}))).length?s.setState({offres:r}):s.setState({offres:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleClickFourniture=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.handlereloadClicked(),a=s.state.offres,e.next=4,s.setState((function(e){return{offresFiltre:e.offresFiltre.map((function(e){return e.marche.id===t?Object(y.a)(Object(y.a)({},e),{},{fournitureClicked:!e.fournitureClicked}):e})),marches:e.marches.map((function(e){return e.id===t?Object(y.a)(Object(y.a)({},e),{},{fournitureClicked:!e.fournitureClicked}):e}))}}));case 4:0===s.state.offresFiltre.filter((function(e){return!0===e.adminClicked})).length?""===s.state.statut?0!==(n=s.state.offresFiltre.filter((function(e){return!0===e.fournitureClicked}))).length?s.setState({offres:n}):s.setState({offres:a}):0!==(c=s.state.offresFiltre.filter((function(e){return e.fournitureClicked&&e.statut===s.state.statut}))).length?s.setState({offres:c}):s.setState({offres:a}):""===s.state.statut?0!==(i=s.state.offresFiltre.filter((function(e){return!0===e.fournitureClicked&&!0===e.adminClicked}))).length?s.setState({offres:i}):s.setState({offres:a}):0!==(r=s.state.offresFiltre.filter((function(e){return e.fournitureClicked&&e.statut===s.state.statut&&!0===e.adminClicked}))).length?s.setState({offres:r}):s.setState({offres:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.isFavoris=Object(E.a)(w.a.mark((function e(){var t,a,n,c,i,r,l,o,d,u,h,j;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==v){e.next=41;break}if("ROLE_ABONNE"!==g){e.next=41;break}return s.setState({isLoading:!0}),t=localStorage.getItem("token"),a=Object(q.a)(t),n=a.username,c=null,e.prev=7,e.next=10,fetch(A+"users?email="+n,{headers:{Accept:"Application/json"}});case 10:return i=e.sent,e.next=13,i.json();case 13:return r=e.sent,l=r.map((function(e){return e.id})),e.next=17,fetch(A+"abonnes?user_id.id="+l[0],{headers:{Accept:"Application/json"}});case 17:return o=e.sent,e.next=20,o.json();case 20:c=e.sent,e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),s.setState({isLoading:!1}),console.error(e.t0);case 27:return d=c.map((function(e){return e.id})),e.next=30,fetch(A+"favoris?abonne.id="+d,{headers:{Accept:"Application/json"}});case 30:return u=e.sent,e.next=33,u.json();case 33:h=e.sent,j=h.map((function(e){return e.offre.id})),console.log(j),s.setState((function(e){return{offres:s.state.offres.map((function(e){return j.includes(e.id)?Object(y.a)(Object(y.a)({},e),{},{favoris:!0}):e}))}})),s.setState({offresFav:s.state.offres.filter((function(e){return j.includes(e.id)}))}),console.log("liste des offres favori"),console.log(s.state.offresFav),s.setState({isLoading:!1});case 41:case"end":return e.stop()}}),e,null,[[7,23]])}))),s.funcNull=function(){return null},s.getOffresFiltreAutorite=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=s.state.offresFiltre.filter((function(e){return!0===e.adminClicked})),n=t.map((function(e){return e.id})),c=s.state.offresFiltre.filter((function(e){return n.includes(e.autorite.id)})),""===s.state.statut?0!==c.length?s.setState({offres:c}):s.setState({offres:a}):(i=c.filter((function(e){return e.statut===s.state.statut})),0!==c.length?s.setState({offres:i}):s.setState({offres:a.filter((function(e){return e.statut===s.state.statut}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getMarches=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"type_marches",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({marches:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{fournitureClicked:!1})}))}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getOffres=Object(E.a)(w.a.mark((function e(){var t,a,n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"appel_offres",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({offres:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{fournitureClicked:!1,adminClicked:!1,delai:0,favoris:!1})})),isLoading:!(!v||"ROLE_ABONNE"!==g)&&s.state.isLoading,statut:""}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:n=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()<new Date(e.limite).getTime()})),c=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()>=new Date(e.limite).getTime()})),s.setState({offresEnCours:n.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"en cours"})}))}),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.abs((s.state.dateDelai-new Date(e.limite))/864e5)})}))}})),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.round(1*e.delai)/1+1})}))}})),s.setState({offresExpire:c.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"expire"})}))}),s.setState({offres:s.state.offresEnCours.concat(s.state.offresExpire)}),s.setState({offresFiltre:s.state.offres});case 22:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getOffresTous=Object(E.a)(w.a.mark((function e(){var t,a,n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"appel_offres",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({offres:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{fournitureClicked:!1,adminClicked:!1,delai:0,favoris:!1})})),isLoading:!1,statut:""}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:n=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()<new Date(e.limite).getTime()})),c=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()>=new Date(e.limite).getTime()})),s.setState({offresEnCours:n.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"en cours"})}))}),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.abs((s.state.dateDelai-new Date(e.limite))/864e5)})}))}})),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.round(1*e.delai)/1+1})}))}})),s.setState({offresExpire:c.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"expire"})}))}),s.setState({offres:s.state.offresEnCours.concat(s.state.offresExpire)}),s.setState({offresFiltre:s.state.offres});case 22:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutorites=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"type_autorites",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({autorites:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})}))}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutoritesContractante=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"autorite_contractantes",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({autc:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})}))}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.Expire=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.handlereloadClicked(),s.OffreByStatus("expire");case 2:case"end":return e.stop()}}),e)}))),s.Recherche=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n,c,i,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.handlereloadClicked(),s.setState((function(e){return{Recherche:e.Recherche}})),a=s.state.Recherche,e.prev=4,s.setState({isLoading:!0}),e.next=8,fetch(A+"appel_offres?libelle="+a,{headers:{Accept:"Application/json"}});case 8:return n=e.sent,e.next=11,n.json();case 11:c=e.sent,s.setState({offres:c.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{fournitureClicked:!1,adminClicked:!1,delai:0})})),isLoading:!1,statut:""}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:i=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()<new Date(e.limite).getTime()})),r=s.state.offres.filter((function(e){return s.state.dateDelai.getTime()>=new Date(e.limite).getTime()})),s.setState({offresEnCours:i.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"en cours"})}))}),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.abs((s.state.dateDelai-new Date(e.limite))/864e5)})}))}})),s.setState((function(e){return{offresEnCours:e.offresEnCours.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{delai:Math.round(1*e.delai)/1+1})}))}})),s.setState({offresExpire:r.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{statut:"expire"})}))}),s.setState({offres:s.state.offresEnCours.concat(s.state.offresExpire)});case 25:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),s.enCours=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.handlereloadClicked(),s.OffreByStatus("en cours");case 2:case"end":return e.stop()}}),e)}))),s.refreshPage=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.reload(!1);case 1:case"end":return e.stop()}}),e)}))),s.state={autorites:[],autc:[],copieDiretions:[],marches:[],offresEnCours:[],offresExpire:[],offres:[],offresFiltre:[],isLoading:null,datedebut:null,datefin:null,datelimit_debut:null,datelimit_fin:null,Recherche:"",statut:"",reloadClicked:!1,adminClicked:!1,typemarcheclicked:!1,autoriteclicked:!1,typeautoriteclicked:!1,tousClicked:!0,encoursClicked:!1,expireClicked:!1,initialStateEncours:!0,dateDelai:new Date,offresFav:[],btn_favoris_hovered:!1,btn_alerte_hovered:!1},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getOffres(),this.getMarches(),this.getAutorites(),this.getAutoritesContractante(),this.isFavoris()}},{key:"OffreByStatus",value:function(e){var t=this.state.offresFiltre.filter((function(t){return!0===t.fournitureClicked&&t.statut==e})),a=this.state.offresFiltre.filter((function(t){return!0===t.adminClicked&&t.statut==e}));if(0===t.length&&0===a.length)this.setState({offres:"expire"===e?this.state.offresExpire:this.state.offresEnCours,statut:e});else if(0===a.length){var s=this.state.offresFiltre.filter((function(e){return t.includes(e)}));this.setState({offres:s,statut:e})}else if(0===t.length){var n=this.state.offresFiltre.filter((function(e){return a.includes(e)}));this.setState({offres:n,statut:e})}else{var c=this.state.offresFiltre.filter((function(e){return a.includes(e)&&t.includes(e)}));this.setState({offres:c,statut:e})}}},{key:"render",value:function(){var e=this,t=0,a=[],s=[],n=this.state.autc.filter((function(e){return!0===e.adminClicked}));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(S,{}),Object(_.jsxs)("div",{className:"background_titre_page",children:[Object(_.jsx)("center",{children:Object(_.jsx)("h1",{className:"titre_page",children:"Avis d'appel \xe0 concurrence"})}),Object(_.jsx)("center",{children:Object(_.jsxs)("h8",{className:"titre_page",children:["Accueil "," > "," appels d'offres"]})}),Object(_.jsx)("center",{children:Object(_.jsxs)("strong",{className:"titre_page",children:["( ",this.state.offres.length," ) r\xe9sultats"]})})]}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsx)("center",{children:Object(_.jsxs)("div",{className:"conteneur_filtres_offres",children:[Object(_.jsxs)("div",{className:"conteneur_filtres",style:{height:this.state.typeautoriteclicked||this.state.typemarcheclicked?"1400px":this.state.typeautoriteclicked||this.state.typemarcheclicked?"1300px":"950px"},children:[Object(_.jsx)("div",{className:"bande_filtre",children:Object(_.jsx)("div",{className:"bande_filtre_txt",children:Object(_.jsx)("h6",{className:"text_filtres",children:"FILTRES"})})}),Object(_.jsxs)("div",{className:"bande_result",children:[Object(_.jsxs)("h6",{className:"text_result",children:["  ",this.state.isLoading,this.state.offres&&this.state.offres.length>0?this.state.offres.length:"AUCUN"," RESULTATS"]}),this.state.reloadClicked?Object(_.jsx)("button",{className:"ok",onClick:this.refreshPage,children:"R\xc9INITIALISER"}):""]}),Object(_.jsxs)("div",{className:"btn_alerte",onMouseEnter:function(){return e.setState({btn_alerte_hovered:!0})},onMouseLeave:function(){return e.setState({btn_alerte_hovered:!1})},children:[Object(_.jsx)("div",{className:"div_icon_alert",children:Object(_.jsx)(Q.a,{className:"icon_alert",size:"1.5em",style:{color:this.state.btn_alerte_hovered?"#1E88E5":"white"}})}),Object(_.jsx)("div",{className:"div_txt_alert",children:Object(_.jsx)("h6",{className:"text_alerte",children:"CR\xc9ER UNE ALERTE"})})]}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsxs)("div",{className:"bande_recherche",children:[Object(_.jsx)("input",{className:"champ_recherche",type:"text",onChange:this.handleRecherche,value:this.state.Recherche,placeholder:"Recherche par mots cl\xe9s"}),Object(_.jsx)("input",{type:"submit",value:"OK",onClick:this.Recherche,disabled:!this.state.Recherche,className:"btn_ok"})]}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsxs)("div",{className:"bande_status_big",children:[Object(_.jsx)("div",{className:"height_space"}),Object(_.jsx)("h6",{className:"status_title",children:"STATUT"}),Object(_.jsx)("div",{className:"height_space1"}),Object(_.jsx)("div",{className:"bande_status",children:Object(_.jsxs)("div",{className:"btn_status",children:[Object(_.jsx)("button",{className:"btn_tous",onClick:function(){e.handleClickTous(),!0===v&&"ROLE_ABONNE"===g?e.isFavoris():e.funcNull(),e.getOffresTous()},style:{backgroundColor:this.state.tousClicked||!0===this.state.initialStateEncours?"#1E88E5":"white",color:this.state.tousClicked?"white":"black"},children:"Tous"}),Object(_.jsx)("button",{className:"btn_encours",onClick:function(){e.handleClickEncours(),e.isFavoris(),e.enCours()},style:{backgroundColor:this.state.encoursClicked?"#1E88E5":"white",color:this.state.encoursClicked?"white":"black"},children:"En cours"}),Object(_.jsx)("button",{className:"btn_expire",onClick:function(){e.handleClickExpire(),!0===v&&"ROLE_ABONNE"===g?e.isFavoris():e.funcNull(),e.Expire()},style:{backgroundColor:this.state.expireClicked?"#1E88E5":"white",color:this.state.expireClicked?"white":"black"},children:"Expir\xe9s"})]})})]}),Object(_.jsx)("div",{className:"height_space"}),!0===v&&"ROLE_ABONNE"===g?Object(_.jsxs)("div",{className:"btn_alerte",onClick:this.mesFvoris,onMouseEnter:function(){return e.setState({btn_favoris_hovered:!0})},onMouseLeave:function(){return e.setState({btn_favoris_hovered:!1})},children:[Object(_.jsx)("div",{className:"div_icon_alert",children:Object(_.jsx)(Q.b,{className:"icon_alert",size:"1.5em",style:{color:this.state.btn_favoris_hovered?"#1E88E5":"white"}})}),Object(_.jsx)("div",{className:"div_txt_alert",children:Object(_.jsx)("h6",{className:"text_alerte",children:"APPELS D'OFFRES FAVORIS"})})]}):null,Object(_.jsx)("div",{className:"height_space"}),Object(_.jsx)("div",{className:"type_de_marche directions",style:{backgroundColor:this.state.autoriteclicked?"#DFE3E3":"#EEF0F0"},children:Object(_.jsx)("div",{className:"div_type_marche_txt",children:Object(_.jsx)("h6",{className:"title_typemarche direction_typemarche",children:"DATE DE PUBLICATION"})})}),Object(_.jsx)("div",{className:"date_publication",children:Object(_.jsx)("div",{className:"",children:Object(_.jsxs)("form",{onSubmit:this.getOffresDatePublication,children:[Object(_.jsx)("div",{className:"date",children:Object(_.jsx)(je.a,{className:"inputDate",selected:this.state.datedebut,onChange:this.handleDatedebut,name:"datedebut",dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"De"})}),Object(_.jsx)("div",{className:"date",children:Object(_.jsx)(je.a,{className:"inputDate",selected:this.state.datefin,onChange:this.handleDatefin,name:"datedebut",dateFormat:"dd/MM/yyyy",maxDate:new Date,minDate:this.state.datedebut,placeholderText:"A"})}),Object(_.jsx)("button",{className:"btn_ok",children:"OK"})]})})}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsx)("div",{className:"type_de_marche directions",style:{backgroundColor:this.state.autoriteclicked?"#DFE3E3":"#EEF0F0"},children:Object(_.jsx)("div",{className:"div_type_marche_txt",children:Object(_.jsx)("h6",{className:"title_typemarche direction_typemarche",children:"DATE LIMITE DE D\xc9P\xd4T"})})}),Object(_.jsx)("div",{className:"date_publication",children:Object(_.jsx)("div",{className:"",children:Object(_.jsxs)("form",{onSubmit:this.getOffresDateLimite,children:[Object(_.jsx)("div",{className:"date",children:Object(_.jsx)(je.a,{className:"inputDate",selected:this.state.datelimit_debut,onChange:this.handleDateLimiteDebut,dateFormat:"dd/MM/yyyy",placeholderText:"De"})}),Object(_.jsx)("div",{className:"date",children:Object(_.jsx)(je.a,{className:"inputDate",selected:this.state.datelimit_fin,onChange:this.handleDateLimiteFin,name:"datedebut",dateFormat:"dd/MM/yyyy",minDate:this.state.datelimit_debut,placeholderText:"A"})}),Object(_.jsx)("button",{className:"btn_ok",children:"OK"})]})})}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsxs)("div",{className:"type_de_marche",onClick:this.handleClickTypeMarche,style:{backgroundColor:this.state.typemarcheclicked?"#DFE3E3":"#EEF0F0"},children:[Object(_.jsx)("div",{className:"div_type_marche_txt",children:Object(_.jsx)("h6",{className:"title_typemarche",children:"TYPE DE MARCH\xc9"})}),Object(_.jsx)("div",{className:"chevron",children:this.state.typemarcheclicked?Object(_.jsx)(D.b,{size:"0.8em",className:"icon_chev1"}):Object(_.jsx)(D.a,{className:"icon_chev2",size:"0.8em"})})]}),this.state.typemarcheclicked?Object(_.jsxs)("div",{className:"type_de_marche_exp",children:[this.state.isLoading,this.state.marches&&this.state.marches.map((function(t,n){return Object(_.jsxs)("div",{className:"checkbox_fourniture",onClick:function(){e.handleClickFourniture(t.id)},style:{backgroundColor:t.fournitureClicked?"#1E88E5":""},children:[Object(_.jsx)("div",{className:"div_fourniture",children:Object(_.jsx)("p",{className:"forniture_txt",style:{color:t.fournitureClicked?"white":"black"},children:t.libelle})}),(a=e.state.offres.filter((function(a,s){return(""===e.state.statut||a.statut===e.state.statut)&&a.marche.id===t.id})),s=[]),Object(_.jsx)("div",{className:"div_fourniture_nbr",children:Object(_.jsx)("h5",{className:"forniture_nbr",style:{color:t.fournitureClicked?"white":"#1E88E5"},children:a.length})})]})}))]}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("div",{className:"height_space"}),Object(_.jsxs)("div",{className:"type_de_marche",onClick:this.handleClickTypeAutorite,style:{backgroundColor:this.state.typeautoriteclicked?"#DFE3E3":"#EEF0F0"},children:[Object(_.jsx)("div",{className:"div_type_marche_txt",children:Object(_.jsx)("h6",{className:"title_typemarche",children:"TYPE D'AUTORIT\xc9 CONTRACTANTE"})}),Object(_.jsx)("div",{className:"chevron",children:this.state.typeautoriteclicked?Object(_.jsx)(D.b,{size:"0.8em",className:"icon_chev1"}):Object(_.jsx)(D.a,{className:"icon_chev2",size:"0.8em"})})]}),this.state.typeautoriteclicked?Object(_.jsxs)("div",{className:"type_de_marche_exp",children:[this.state.isLoading,this.state.autorites&&this.state.autorites.map((function(a,n){return Object(_.jsxs)("div",{className:"checkbox_fourniture",onClick:function(){e.handleClickAdminPublic(a.id)},style:{backgroundColor:a.adminClicked?"#1E88E5":""},children:[Object(_.jsx)("div",{className:"div_fourniture",children:Object(_.jsx)("p",{className:"forniture_txt",style:{color:a.adminClicked?"white":"black"},children:a.libelle})}),(t=0,a.autoriteContractantes.map((function(e){t+=e.appelOffres.length})),""!==e.state.statut&&(s=e.state.offres.filter((function(t){return t.statut===e.state.statut&&t.autorite.type_autorite.id===a.id}))),console.log("")),Object(_.jsx)("div",{className:"div_fourniture_nbr",children:Object(_.jsx)("h5",{className:"forniture_nbr",style:{color:a.adminClicked?"white":"#1E88E5"},children:""===e.state.statut?t:s.length})})]})}))]}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("div",{className:"height_space"}),this.state.typeautoriteclicked?Object(_.jsx)("div",{className:"height_space"}):null,this.state.typeautoriteclicked?Object(_.jsx)("div",{className:"height_space"}):null,this.state.typeautoriteclicked?Object(_.jsx)("div",{className:"height_space"}):null,Object(_.jsx)("div",{className:"type_de_marche directions",style:{backgroundColor:this.state.autoriteclicked?"#DFE3E3":"#EEF0F0"},children:Object(_.jsx)("div",{className:"div_type_marche_txt div_direction_txt",children:Object(_.jsx)("h6",{className:"title_typemarche direction_typemarche",children:"AUTORIT\xc9 CONTRACTANTE"})})}),this.state.typeautoriteclicked?Object(_.jsxs)("div",{className:"direction_exp",children:[this.state.isLoading,Object(_.jsx)(fe.a,{className:"toutes",multiple:!0,id:"tags-outlined",options:n,getOptionLabel:function(e){return e.libelle},filterSelectedOptions:!0,renderInput:function(e){return Object(_.jsx)(be.a,Object(y.a)(Object(y.a)({},e),{},{variant:"outlined",label:"Toutes",placeholder:"Rechercher"}))},onChange:function(t,a){e.getOffresFiltreAutorite(a)}})]}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("div",{className:"height_space"})]}),Object(_.jsxs)("div",{className:"conteneur_offres",children:[Object(_.jsxs)("div",{className:"tutorial",children:[Object(_.jsxs)("div",{className:"tuto_vert",children:[Object(_.jsx)("div",{className:"vert"}),Object(_.jsxs)("p",{className:"delai_tuto",children:["D\xe9lai"," > ","3 jours"]})]}),Object(_.jsxs)("div",{className:"tuto_jaune",children:[Object(_.jsx)("div",{className:"jaune",children:" "}),Object(_.jsxs)("p",{className:"delai_tuto",children:["D\xe9lai"," <= ","3 jours"]})]}),Object(_.jsxs)("div",{className:"tuto_rouge",children:[Object(_.jsx)("div",{className:"rouge"}),Object(_.jsx)("p",{className:"delai_tuto",children:"D\xe9lai expir\xe9"})]})]}),this.state.isLoading?Object(_.jsxs)("div",{className:"offre_elmt_spin",style:{marginTop:50},children:[" ",Object(_.jsx)("div",{className:"spin"})," "]}):Object(_.jsx)(ue,{offres:this.state.offres,loading:this.state.isLoading})]}),Object(_.jsx)("div",{style:{height:"200px"}})]})}),Object(_.jsx)(L,{})]})}}]),a}(n.a.Component),me=a(84),Oe=(a(373),a(374),a(375),function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).getMarches=Object(E.a)(w.a.mark((function e(){var t,a,n,c,i,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch(A+"type_marches",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.next=10,fetch(A+"type_autorites",{headers:{Accept:"Application/json"}});case 10:return n=e.sent,e.next=13,n.json();case 13:return c=e.sent,e.next=16,fetch(A+"users",{headers:{Accept:"Application/json"}});case 16:return i=e.sent,e.next=19,i.json();case 19:r=e.sent,s.setState({marches:a,isLoading:!1,typeAut:c,users:r}),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,23]])}))),s.handleType=function(e){s.setState({type:e})},s.handleEmail=function(){var e=Object(E.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,e.next=3,s.setState({email:a});case 3:if(0!==s.state.users.filter((function(e){return e.email===s.state.email})).length){e.next=9;break}return e.next=7,s.setState({userCheck:!1});case 7:e.next=11;break;case 9:return e.next=11,s.setState({userCheck:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleNom=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z][a-zA-Z \xef\xee\xe9\xeb\xe4\xe8\xe7]*$/,!(n=t.target.value).match(a)){e.next=7;break}return e.next=5,s.setState(Object(me.a)({},t.target.name,n));case 5:e.next=9;break;case 7:return e.next=9,s.setState(Object(me.a)({},t.target.name,n.slice(0,-1)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleInput=function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,n=/^[a-zA-Z][a-zA-Z0-9 \xef\xee\xe9\xeb\xe4\xe8\xe7]*$/,!a.match(n)){e.next=7;break}return e.next=5,s.setState(Object(me.a)({},t.target.name,a));case 5:e.next=9;break;case 7:return e.next=9,s.setState(Object(me.a)({},t.target.name,a.slice(0,-1)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleRadio=function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("non"!==t.target.value){e.next=5;break}return e.next=3,s.setState({Role:"ROLE_ABONNE",abonneCheck:!0,autCheck:!1});case 3:e.next=7;break;case 5:return e.next=7,s.setState({Role:"ROLE_USER",abonneCheck:!1,autCheck:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleOpen=function(){s.setState({open:!s.state.open})},s.handleSubmit=function(){var e=Object(E.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1===t.currentTarget.checkValidity()||s.state.password!==s.state.confirmPassword||!0===s.state.userCheck)t.preventDefault(),t.stopPropagation(),s.setState({validated:!0,passwordCheck:!0});else try{a={},a="ROLE_ABONNE"===s.state.Role?{email:s.state.email,roles:[s.state.Role],plainPassword:s.state.password,nom:s.state.nom,prenom:s.state.prenom,organisation:s.state.organisation}:{email:s.state.email,roles:[s.state.Role],plainPassword:s.state.password,nom:s.state.nom,prenom:s.state.prenom,organisation:s.state.organisation,type:s.state.type},fetch("https://mpublics.herokuapp.com/api/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(){var e=Object(E.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return n=a&&a.message||t.status,e.abrupt("return",Promise.reject(n));case 6:s.setState({open:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){s.setState({failedAuth:!0}),s.setState({errorMessage:e.toString()}),console.error("There was an error!",e)}))}catch(n){console.log(n)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleConfirm=function(e){s.setState({confirmPassword:e.target.value})},s.handleClickShowPassword=function(){s.setState({showPassword:!s.state.showPassword})},s.handleMouseDownPassword=function(e){e.preventDefault()},s.state={password:"",confirmPassword:"",showPassword:!1,email:"",nom:"",prenom:"",type:null,organisation:"",marches:[],isLoading:!1,Role:"",validated:!1,passwordCheck:!1,abonneCheck:!1,autCheck:!1,typeAut:[],users:[],userCheck:!1,open:!1},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getMarches()}},{key:"render",value:function(){var e=this;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(S,{}),Object(_.jsx)("div",{className:"connection_body",children:Object(_.jsxs)("center",{children:[Object(_.jsx)("div",{className:"height_space_connection_page"}),Object(_.jsxs)("div",{className:"connection_bande",children:[Object(_.jsx)("div",{className:"titre_connection_div",children:Object(_.jsx)("h3",{className:"titre_connection_txt",children:"INSCRIPTION POUR ABONN\xc9S OU AUTORIT\xc9S CONTRACTANTES"})}),Object(_.jsx)("div",{className:"height_space_connection_page2"}),Object(_.jsx)("div",{className:"form_inscription_div",children:Object(_.jsxs)(u.a,{noValidate:!0,validated:this.state.validated,className:"inscription-form",onSubmit:this.handleSubmit,children:[Object(_.jsxs)(u.a.Row,{children:[Object(_.jsxs)(u.a.Group,{as:W.a,controlId:"formGridNom",children:[Object(_.jsx)(u.a.Label,{children:"Nom"}),Object(_.jsx)(u.a.Control,{type:"text",value:this.state.nom,required:!0,name:"nom",minLength:"2",onChange:this.handleNom}),Object(_.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Renseignez votre nom"})]}),Object(_.jsxs)(u.a.Group,{as:W.a,controlId:"formGridPrenom",children:[Object(_.jsx)(u.a.Label,{children:"Pr\xe9nom"}),Object(_.jsx)(u.a.Control,{type:"text",required:!0,value:this.state.prenom,name:"prenom",onChange:this.handleNom}),Object(_.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Renseignez votre pr\xe9nom"})]})]}),Object(_.jsxs)(u.a.Group,{controlId:"formGridEmail",children:[Object(_.jsx)(u.a.Label,{children:"Email"}),Object(_.jsx)(u.a.Control,{type:"email",value:this.state.email,required:!0,name:"email",onChange:this.handleEmail}),Object(_.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Renseignez votre email"}),this.state.userCheck?Object(_.jsx)("div",{className:"invalid-feedback",style:{display:"block"},children:"Cet utilisateur existe d\xe9j\xe0"}):Object(_.jsx)(_.Fragment,{})]}),Object(_.jsxs)(u.a.Row,{children:[Object(_.jsxs)(u.a.Group,{as:W.a,controlId:"formGridPassword",children:[Object(_.jsx)(u.a.Label,{children:"Mot de passe"}),Object(_.jsx)(G.a,{name:"password",required:!0,className:"password",id:"filled-adornment-password",type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleInput,endAdornment:Object(_.jsx)(V.a,{position:"end"})}),"                     ",this.state.passwordCheck&&""===this.state.password?Object(_.jsx)("div",{className:"invalid-feedback",style:{display:"block"},children:"Renseignez votre mot de passe"}):Object(_.jsx)(_.Fragment,{})]}),Object(_.jsxs)(u.a.Group,{as:W.a,controlId:"formGridPassword2",children:[Object(_.jsx)(u.a.Label,{children:"Confirmer mot de passe"}),Object(_.jsx)(G.a,{name:"confirmPassword",required:!0,className:"password",id:"filled-adornment-password",type:"password",value:this.state.confirmPassword,onChange:this.handleInput}),this.state.passwordCheck&&this.state.password!==this.state.confirmPassword?Object(_.jsx)("div",{className:"invalid-feedback",style:{display:"block"},children:"Les mots de passe ne correspondent pas"}):this.state.passwordCheck&&""===this.state.confirmPassword?Object(_.jsx)("div",{className:"invalid-feedback",style:{display:"block"},children:"Ce champs est requis"}):Object(_.jsx)(_.Fragment,{})]})]}),Object(_.jsxs)(u.a.Group,{controlId:"formGridEntite",children:[Object(_.jsx)(u.a.Label,{children:"Entreprise / Organisation"}),Object(_.jsx)(u.a.Control,{type:"text",value:this.state.organisation,name:"organisation",required:!0,minLength:"5",onChange:this.handleInput}),Object(_.jsx)(u.a.Control.Feedback,{type:"invalid",children:this.state.organisation.length<5&&this.state.organisation.length>0?"Trop court":"Renseignez votre entit\xe9"})]}),Object(_.jsxs)(u.a.Row,{children:[Object(_.jsx)(u.a.Group,{className:"check",as:W.a,children:Object(_.jsx)(u.a.Label,{children:"Voulez-vous soumettre des offres"})}),Object(_.jsxs)(u.a.Group,{as:W.a,children:[Object(_.jsx)(u.a.Check,{required:!0,className:"radiobox",type:"radio",label:"Oui",name:"formHorizontalRadios",id:"formHorizontalRadios1",value:"oui",onChange:this.handleRadio}),Object(_.jsx)(u.a.Check,{required:!0,className:"radiobox",type:"radio",label:"Non",name:"formHorizontalRadios",id:"formHorizontalRadios2",value:"non",onChange:this.handleRadio}),Object(_.jsx)(u.a.Control.Feedback,{type:"invalid",children:"Renseignez votre choix"})]})]}),this.state.abonneCheck?Object(_.jsxs)(u.a.Group,{children:[Object(_.jsx)(u.a.Label,{children:"Recevoir des alertes selon le type de march\xe9"}),this.state.isLoading,Object(_.jsx)(fe.a,{className:"marches",multiple:!0,id:"tags-outlined",options:this.state.marches,getOptionLabel:function(e){return e.libelle},filterSelectedOptions:!0,renderInput:function(e){return Object(_.jsx)(be.a,Object(y.a)(Object(y.a)({},e),{},{variant:"outlined",label:"Types de march\xe9"}))},onChange:function(e,t){console.log(t)}})]}):Object(_.jsx)(_.Fragment,{}),this.state.autCheck?Object(_.jsxs)(u.a.Group,{children:[Object(_.jsx)(u.a.Label,{children:"Quel est le type d'autorit\xe9 de votre entit\xe9"}),this.state.isLoading,Object(_.jsx)(fe.a,{className:"marches",id:"tags-outlined",options:this.state.typeAut,getOptionLabel:function(e){return e.libelle},filterSelectedOptions:!0,renderInput:function(e){return Object(_.jsx)(be.a,Object(y.a)(Object(y.a)({},e),{},{variant:"outlined",label:"Types d'autorit\xe9"}))},onChange:function(t,a){try{e.handleType(a.id)}catch(s){console.log(s)}}}),this.state.passwordCheck&&null===this.state.type?Object(_.jsx)("div",{className:"invalid-feedback",style:{display:"block"},children:"S\xe9lectionner le type de votre organisation"}):Object(_.jsx)(_.Fragment,{})]}):Object(_.jsx)(_.Fragment,{}),Object(_.jsxs)(u.a.Row,{children:[Object(_.jsx)(u.a.Group,{as:W.a,id:"formGridCheckbox",children:Object(_.jsx)(u.a.Check,{type:"checkbox",label:"J'accepte les conditions d'utilisations",required:!0})}),Object(_.jsx)(u.a.Group,{as:W.a,children:Object(_.jsx)("div",{className:"forgetpassword_div",children:Object(_.jsx)("h6",{className:"forgetpassword_div_txt",children:Object(_.jsx)("a",{href:"connection",children:"Se connecter ?"})})})})]}),Object(_.jsx)(j.a,{type:"submit",className:"btn_seconnecter inscrire",onClick:this.handleUserCheck,children:"S'INSCRIRE"})]})})]}),Object(_.jsxs)(te.a,{open:this.state.open,onClose:this.handleOpen,children:[Object(_.jsx)(ce.a,{style:{cursor:"move"},id:"draggable-dialog-title",children:this.state.prenom+", merci de votre inscription"}),Object(_.jsx)(se.a,{children:Object(_.jsxs)(ne.a,{children:["ROLE_ABONNE"===this.state.Role?"Vous pourrez d\xe9sormais mettre en favoris des appels d'offres et recevoir des alertes  ":"Veuillez confirmer avec le lien sur votre mail pour pouvoir continuer!  ",Object(_.jsx)("i",{className:"fas fa-smile-wink fa-1x"})]})}),Object(_.jsx)(ae.a,{children:Object(_.jsx)(j.a,{autoFocus:!0,onClick:this.handleOpen,href:"ROLE_ABONNE"===this.state.Role?"/connection":"",color:"primary",children:"OK"})})]})]})})]})}}]),a}(n.a.Component)),xe=(a(389),function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).state={intervalId:0},e}return Object(f.a)(a,[{key:"scrollStep",value:function(){0===window.pageYOffset&&clearInterval(this.state.intervalId),window.scroll(0,window.pageYOffset-this.props.scrollStepInPx)}},{key:"scrollToTop",value:function(){var e=setInterval(this.scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:e})}},{key:"render",value:function(){var e=this;return Object(_.jsx)("button",{title:"Back to top",className:"scroll",onClick:function(){e.scrollToTop()},children:Object(_.jsx)("span",{className:"arrow-up",children:Object(_.jsx)("i",{className:"fas fa-chevron-up"})})})}}]),a}(n.a.Component)),ve=a(151);var ge=function(e){var t=Object(s.useState)(!0),a=Object(r.a)(t,2),n=(a[0],a[1],Object(s.useState)(!1)),c=Object(r.a)(n,2);return c[0],c[1],Object(_.jsxs)(l.a,{bg:"white",expand:"lg",style:{padding:"0"},children:[Object(_.jsx)(l.a.Brand,{href:"/",className:"content_logo",children:Object(_.jsx)(k.a,{children:Object(_.jsx)("img",{width:170,height:70,className:"mr-3",src:"https://www.gainde2000.com/wp-content/uploads/2017/11/logo_Gainde.png",alt:""})})}),Object(_.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(_.jsxs)(o.a,{className:"ml-auto",children:[Object(_.jsx)(o.a.Link,{href:"/dashbord",className:"menu-item",children:"APPELS D'OFFRES"}),"ROLE_ADMIN"===g?Object(_.jsx)(o.a.Link,{href:"/liste-utilisateurs",className:"menu-item",children:"UTILISATEURS"}):null,Object(_.jsxs)(u.a,{inline:!0,children:[Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)(x.b,{to:"/",children:Object(_.jsx)("button",{className:"btn",children:"RETOUR"})}),Object(_.jsx)("div",{className:"width_space"}),Object(_.jsx)("div",{className:"width_space"})]})]})})]})},_e=a(99),Ne=a.n(_e),ke=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).handleChangeSelect=function(e){console.log(e.target.value),s.setState({marcheSelected:e.target.value})},s.handleChangeSelectAutorite=function(e){console.log(e.target.value),s.setState({autoriteSelected:e.target.value})},s.handleFile=function(e){s.setState({selectedFile:e.target.files[0]})},s.handleUpload=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,a=localStorage.getItem("token"),Object(q.a)(a),null!==s.state.selectedFile&&""!==s.state.libelle&&""!==s.state.lieu&&""!==s.state.selectedDay){e.next=7;break}console.log("heyyy"),e.next=17;break;case 7:return t.append("file",s.state.selectedFile,s.state.selectedFile.name),t.append("libelle",s.state.libelle),t.append("limite",s.state.selectedDay),t.append("ref","16"===s.state.marcheSelected?"FOU_"+Math.trunc(s.state.random).toString():"17"===s.state.marcheSelected?"SER_"+Math.trunc(s.state.random).toString():"18"===s.state.marcheSelected?"TRA_"+Math.trunc(s.state.random).toString():"19"===s.state.marcheSelected?"PIN_"+Math.trunc(s.state.random).toString():"DEL_"+Math.trunc(s.state.random).toString()),t.append("ouverture",s.state.selectedDay),t.append("lieu",s.state.lieu),t.append("marche",s.state.marcheSelected),t.append("autorite","ROLE_USER"===g?s.state.autorit.map((function(e){return e.id})):s.state.autoriteSelected),e.next=17,fetch("https://mpublics.herokuapp.com/api/appel_offres/ajout",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+a},body:t}).then((function(e){console.log(e),s.setState({ok:!s.state.ok}),alert("Appel d'offre ajout\xe9 avec succ\xe9s"),window.location.reload(!0)}));case 17:case"end":return e.stop()}}),e)}))),s.handleChangeLieu=function(e){s.setState({lieu:e.target.value})},s.handleChangeLibelle=function(e){s.setState({libelle:e.target.value})},s.getMarches=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/type_marches",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({marches:a.map((function(e){return Object(y.a)({},e)}))}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutorites=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/autorite_contractantes",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({autorites:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})})),isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutorite=Object(E.a)(w.a.mark((function e(){var t,a,n,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),a=Object(q.a)(t),n=a.username,s.setState({isLoading:!0}),e.next=7,fetch("https://mpublics.herokuapp.com/api/autorite_contractantes?user.email="+n,{headers:{Accept:"Application/json"}});case 7:return c=e.sent,e.next=10,c.json();case 10:i=e.sent,s.setState({autorit:i.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})})),isLoading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),s.setSelectedDay=function(e){s.setState({selectedDay:e})},s.setSelectedDay=s.setSelectedDay.bind(Object(p.a)(s)),s.state={submit:!1,selectedFile:null,libelle:"",lieu:"",marches:[],autorites:[],autorit:[],marcheSelected:"16",autoriteSelected:"31",selectedDay:null,curTime:(new Date).toLocaleString(),files:null,ok:!1,redirect:!1,random:0},s.handleClickRandom=s.handleClickRandom.bind(Object(p.a)(s)),s.handleChangeLieu=s.handleChangeLieu.bind(Object(p.a)(s)),s.handleChangeLibelle=s.handleChangeLibelle.bind(Object(p.a)(s)),s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.handleChangeSelect=s.handleChangeSelect.bind(Object(p.a)(s)),s.handleChangeSelectAutorite=s.handleChangeSelectAutorite.bind(Object(p.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(p.a)(s)),s.getAutorite=s.getAutorite.bind(Object(p.a)(s)),s}return Object(f.a)(a,[{key:"handleClickRandom",value:function(){var e=1e4+89999*Math.random();this.setState({random:this.state.random+e})}},{key:"handleSubmit",value:function(){this.setState({submit:!0})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({selectedDay:e.target.value})}},{key:"componentDidMount",value:function(){this.getMarches(),this.getAutorites(),this.getAutorite(),this.handleClickRandom()}},{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{children:[Object(_.jsx)(ge,{}),Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.e,{children:[Object(_.jsx)(F.g,{children:"Ajouter un appel d'offre"}),Object(_.jsxs)(F.f,{children:[Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"name",children:"Objet"}),Object(_.jsx)(F.k,{maxLength:150,value:this.state.libelle,onChange:this.handleChangeLibelle,name:"libelle",id:"name",placeholder:"Entrez la description de l'offre",required:!0}),null!==this.state.libelle&&""!==this.state.libelle||!this.state.submit?null:Object(_.jsx)("p",{style:{color:"red"},children:"Veuillez renseign\xe9 un libell\xe9 pour l'appel d'offre"})]})})}),Object(_.jsx)(F.s,{}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{xs:"6",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccmonth",children:"Type de march\xe9"}),Object(_.jsx)(F.t,{value:this.state.marcheSelected,onChange:this.handleChangeSelect,custom:!0,name:"ccmonth",id:"ccmonth",required:!0,children:this.state.marches.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.libelle},e.id)}))}),""===this.state.marcheSelected&&this.state.submit?Object(_.jsx)("p",{style:{color:"red"},children:"Veuillez choisir le type de march\xe9 de l'appel d'offre"}):null]})}),Object(_.jsx)(F.h,{xs:"6",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccyear",children:"Autorit\xe9 contractante"}),"ROLE_USER"===g?Object(_.jsx)(F.t,{disabled:!0,value:this.state.autoriteSelected,onChange:this.handleChangeSelectAutorite,custom:!0,name:"ccyear",id:"ccyear",children:this.state.autorit.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.libelle},e.id)}))}):Object(_.jsx)(F.t,{value:this.state.autoriteSelected,onChange:this.handleChangeSelectAutorite,custom:!0,name:"ccyear",id:"ccyear",children:this.state.autorites.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.libelle},e.id)}))}),""===this.state.autoriteSelected&&this.state.submit?Object(_.jsx)("p",{style:{color:"red"},children:"Veuillez choisir l'autorit\xe9 contractante"}):null]})}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccnumber",children:"Lieu d'acquisition"}),Object(_.jsx)(F.k,{value:this.state.lieu,onChange:this.handleChangeLieu,name:"lieu",id:"ccnumber",placeholder:"Dakar",required:!0}),null!==this.state.lieu&&""!==this.state.lieu||!this.state.submit?null:Object(_.jsx)("p",{style:{color:"red"},children:"Veuillez renseign\xe9 le lieu d'acquisition de l'appel d'offre"})]})}),Object(_.jsx)(F.h,{xs:"6",children:Object(_.jsx)(F.s,{})}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccnumber",children:"Date limite des candidatures"}),Object(_.jsx)(F.k,{value:this.state.selectedDay,onChange:this.handleChange,type:"date",id:"date-input",name:"datelimite",placeholder:"date"}),null===this.state.selectedDay&&this.state.submit?Object(_.jsx)("p",{style:{color:"red"},children:"Veuillez d\xe9finir la date limite"}):null]})}),Object(_.jsx)(F.h,{xs:"12"}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)("input",{type:"file",onChange:this.handleFile,id:"file-input",name:"file-input"}),null===this.state.selectedFile&&this.state.submit?Object(_.jsx)("p",{style:{color:"red"},children:"Veuillez choisir un fichier"}):null]})}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsx)(F.d,{onClick:function(){e.handleUpload(),e.handleSubmit()},color:"info",children:"Publier"})})]})]})]})})}),Object(_.jsx)(L,{})]})}}]),a}(s.Component),Se=a(234),Ce=(a(60),function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).getBadge=function(e){switch(e){case"en cours":return"success";case"expire":return"danger";default:return"success"}},s.handleChangeSelect=function(e){console.log(e.target.value),s.setState({marcheSelected:e.target.value})},s.handleChangeSelectAutorite=function(e){console.log(e.target.value),s.setState({autoriteSelected:e.target.value})},s.getMarches=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/type_marches",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({marches:a.map((function(e){return Object(y.a)({},e)}))}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutorites=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/autorite_contractantes",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({autorites:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})})),isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutorite=Object(E.a)(w.a.mark((function e(){var t,a,n,c,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),a=Object(q.a)(t),n=a.username,s.setState({isLoading:!0}),e.next=7,fetch("https://mpublics.herokuapp.com/api/autorite_contractantes?user.email="+n,{headers:{Accept:"Application/json"}});case 7:return c=e.sent,e.next=10,c.json();case 10:i=e.sent,s.setState({autorit:i.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})})),isLoading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),s.handleFile=function(e){s.setState({selectedFile:e.target.files[0]})},s.toggleDetails=function(e){var t=s.state.details.indexOf(e),a=s.state.details.slice();-1!==t?a.splice(t,1):a=[].concat(Object(ve.a)(s.state.details),[e]),s.setState({details:a})},s.handleUdate=function(e){var t=new FormData;t.append("limite",s.state.selectedDay),t.append("ref","ghfgfh"),t.append("ouverture",s.state.selectedDay),t.append("lieu",s.state.lieu),t.append("marche",s.state.marcheSelected),t.append("autorite",s.state.autoriteSelected),s.state.detailsOffre.map((function(t,a){return Ne.a.put("https://mpublics.herokuapp.com/api/appel_offres/"+e,{libelle:""!==s.state.libelle?s.state.libelle:t.libelle,lieu:""!==s.state.lieu?s.state.lieu:t.lieu,limite:""!==s.state.selectedDay&&null!==s.state.selectedDay?s.state.selectedDay:t.limite}).then((function(e){s.reload(),console.log(e)}))}))},s.handleUdateMarche=function(e){s.state.detailsOffre.map((function(t,a){return Ne.a.put("https://mpublics.herokuapp.com/api/appel_offres/"+e,{marche:""!==s.state.marcheSelected||null!==s.state.marcheSelected?s.state.marcheSelected:t.marche.id}).then((function(e){s.reload(),console.log(e)}))}))},s.getBadge=s.getBadge.bind(Object(p.a)(s)),s.getOffres=s.getOffres.bind(Object(p.a)(s)),s.deleteOffres=s.deleteOffres.bind(Object(p.a)(s)),s.handleModal=s.handleModal.bind(Object(p.a)(s)),s.handleChangeSelect=s.handleChangeSelect.bind(Object(p.a)(s)),s.handleChangeLibelle=s.handleChangeLibelle.bind(Object(p.a)(s)),s.handleChangeLieu=s.handleChangeLieu.bind(Object(p.a)(s)),s.handleChangeSelectAutorite=s.handleChangeSelectAutorite.bind(Object(p.a)(s)),s.getAutorite=s.getAutorite.bind(Object(p.a)(s)),s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.getMarches=s.getMarches.bind(Object(p.a)(s)),s.getAutorites=s.getAutorites.bind(Object(p.a)(s)),s.reload=s.reload.bind(Object(p.a)(s)),s.handleFile=s.handleFile.bind(Object(p.a)(s)),s.handleUdate=s.handleUdate.bind(Object(p.a)(s)),s.toggleDetails=s.toggleDetails.bind(Object(p.a)(s)),s.logout=s.logout.bind(Object(p.a)(s)),s.handleUdateMarche=s.handleUdateMarche.bind(Object(p.a)(s)),s.getFavoris=s.getFavoris.bind(Object(p.a)(s)),s.state={details:[],selectedFile:null,large:!1,libelle:"",offres:[],isLoading:!1,idItem:null,detailsOffre:[],marches:[],autorites:[],marcheSelected:"",autoriteSelected:"",selectedDay:null,lieu:"",voirDetails:!1,confirmation:!1,autorit:[],favoris:[]},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getOffres(),this.getMarches(),this.getAutorites(),this.getAutorite(),this.getFavoris()}},{key:"getFavoris",value:function(){var e=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/favoris",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,this.setState({favoris:a.map((function(e){return Object(y.a)({},e)})),isLoading:!1}),console.error(this.state.favoris),console.error("dfdfdfddddfsdf"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),this.setState({isLoading:!1}),console.error(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"getOffres",value:function(){var e=Object(E.a)(w.a.mark((function e(){var t,a,s,n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=Object(q.a)(t),s=a.username,e.prev=3,this.setState({isLoading:!0}),e.next=7,fetch("ROLE_ADMIN"===g?"https://mpublics.herokuapp.com/api/appel_offres":"https://mpublics.herokuapp.com/api/appel_offres?autorite.user.email="+s,{headers:{Accept:"Application/json"}});case 7:return n=e.sent,e.next=10,n.json();case 10:c=e.sent,this.setState({offres:c.map((function(e){return Object(y.a)({},e)})),isLoading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),this.setState({isLoading:!1}),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.clear()}},{key:"reload",value:function(){window.location.reload(!0)}},{key:"getDetailsOffres",value:function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({detailsOffre:this.state.offres.filter((function(e){return e.id===t}))});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOffres",value:function(){var e=Object(E.a)(w.a.mark((function e(t,a){var s,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mpublics.herokuapp.com/api/favoris?offre.id="+a,{method:"GET",headers:{Accept:"Application/json"}});case 3:return s=e.sent,e.next=6,s.json();case 6:n=e.sent,this.setState({favoris:n.map((function(e){return Object(y.a)({},e)})),isLoading:!1});try{fetch("https://mpublics.herokuapp.com/api/favoris/"+this.state.favoris[0].id,{method:"DELETE",headers:{Accept:"Application/json"}}).then((function(e){console.log(e),console.log("reponse delete favoris")}))}catch(t){console.log(t)}try{fetch("https://mpublics.herokuapp.com/api/appel_offres/"+a,{method:"DELETE",headers:{Accept:"Application/json"}}).then((function(e){console.log("appel d'offre deleted ou pas"),console.log(e),window.location.reload(!0)}))}catch(t){console.log(t)}console.log(this.state.favoris),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("faavorisDeleted error");case 16:console.log(a);case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleModal",value:function(){this.setState({large:!this.state.large})}},{key:"handleChangeLieu",value:function(e){this.setState({lieu:e.target.value})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({selectedDay:e.target.value})}},{key:"handleChangeLibelle",value:function(e){this.setState({libelle:e.target.value})}},{key:"render",value:function(){var e=this;return!0===v&&"ROLE_ABONNE"!==g?Object(_.jsxs)("div",{children:[Object(_.jsx)(ge,{}),Object(_.jsx)(T.a,{}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"3",children:Object(_.jsx)("div",{className:"btn_ajout_offre",children:Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{xs:"7",children:Object(_.jsx)("h4",{children:"Ajouter un appel d'offre"})}),Object(_.jsx)(F.h,{xs:"2",children:Object(_.jsx)(x.b,{to:"/ajout-offres",children:Object(_.jsx)(Se.a,{size:"2.2em",color:"#1565C0"})})})]})})}),Object(_.jsx)(F.h,{xs:"1"})]}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2"}),Object(_.jsx)(F.h,{xs:"2",children:Object(_.jsx)("p",{})})]}),Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{xs:"12",lg:"12",children:Object(_.jsxs)(F.e,{children:[Object(_.jsx)(F.g,{children:"Liste des appels d'offres"}),Object(_.jsxs)(F.f,{children:[!0===this.state.isLoading?Object(_.jsx)("center",{children:Object(_.jsx)(F.u,{color:"info"})}):Object(_.jsx)(F.i,{clickableRows:!0,sorter:!0,items:this.state.offres,fields:["id","ref","libelle","statut","limite","modifier","supprimer","_details"],columnFilter:!0,itemsPerPage:10,responsive:!0,tableFilter:!0,itemsPerPageSelect:!0,onRowClick:function(e){},pagination:!0,scopedSlots:{modifier:function(t,a){return Object(_.jsx)("td",{className:"py-2",children:Object(_.jsx)(F.d,{color:"info",variant:"outline",shape:"square",size:"sm",onClick:function(){e.getDetailsOffres(t.id),e.setState({large:!e.state.large})},children:"Modifier"})})},supprimer:function(t,a){return Object(_.jsx)("td",{className:"py-2",children:Object(_.jsx)(F.d,{color:"danger",variant:"outline",shape:"square",size:"sm",onClick:function(){e.getDetailsOffres(t.id),e.setState({confirmation:!e.state.confirmation})},children:"Supprimer"})})},limite:function(e,t){return Object(_.jsx)("td",{children:e.limite.slice(0,10)})},statut:function(e,t){var a=new Date(e.limite.slice(0,10)),s=new Date,n=(a.getTime()-s.getTime())/864e5;return Object(_.jsx)("td",{children:Object(_.jsx)(F.a,{color:n<=0?"danger":"success",children:n<=0?"Expir\xe9":"En cours"})})},_details:function(t,a){return Object(_.jsx)("td",{className:"py-2",children:Object(_.jsx)(F.d,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){e.getDetailsOffres(t.id),e.setState({voirDetails:!e.state.voirDetails})},children:"Details"})})}}}),this.state.detailsOffre.map((function(t){return Object(_.jsxs)(F.n,{show:e.state.large,size:"lg",children:[Object(_.jsx)(F.q,{children:Object(_.jsxs)(F.r,{children:["Modification de l'appel d'offre N\xb0",t.id]})}),Object(_.jsx)(F.o,{children:Object(_.jsxs)(F.f,{children:[Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsxs)("p",{htmlFor:"name",children:["id: ",t.id]}),Object(_.jsx)(F.l,{htmlFor:"name",children:"Libell\xe9"}),Object(_.jsx)(F.k,{defaultValue:t.libelle,onChange:e.handleChangeLibelle,name:"libelle",id:"name",placeholder:"Entrez la description de l'offre",required:!0})]})})}),Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{xs:"12"})}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccyear",children:"Autorit\xe9 contractante"}),"ROLE_USER"===g?Object(_.jsx)(F.t,{disabled:!0,defaultValue:t.autorite.id,onChange:e.handleChangeSelectAutorite,custom:!0,name:"ccyear",id:"ccyear",children:e.state.autorit.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.libelle},e.id)}))}):Object(_.jsx)(F.t,{disabled:!0,defaultValue:t.autorite.id,onChange:e.handleChangeSelectAutorite,custom:!0,name:"ccyear",id:"ccyear",children:e.state.autorites.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.libelle},e.id)}))})]})}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccnumber",children:"Lieu d'acquisition"}),Object(_.jsx)(F.k,{defaultValue:t.lieu,onChange:e.handleChangeLieu,name:"lieu",id:"ccnumber",placeholder:"Dakar",required:!0})]})}),Object(_.jsx)(F.h,{xs:"6",children:Object(_.jsx)(F.s,{})}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsxs)(F.j,{children:[Object(_.jsx)(F.l,{htmlFor:"ccnumber",children:"Date limite des candidatures"}),Object(_.jsx)(F.k,{defaultValue:t.limite,onChange:e.handleChange,type:"date",id:"date-input",name:"datelimite",placeholder:"date"})]})}),Object(_.jsx)(F.h,{xs:"12"}),Object(_.jsx)(F.h,{xs:"12",children:Object(_.jsx)("p",{})})]})]})}),Object(_.jsxs)(F.p,{children:[Object(_.jsx)(F.d,{onClick:function(){e.handleUdate(t.id),e.handleUdateMarche(t.id)},color:"info",children:"Enregistrer"})," ",Object(_.jsx)(F.d,{color:"secondary",onClick:e.reload,children:"Retour"})]})]})})),this.state.detailsOffre.map((function(t){return Object(_.jsxs)(F.n,{show:e.state.voirDetails,size:"lg",children:[Object(_.jsx)(F.q,{closeButton:!0,children:Object(_.jsxs)(F.r,{children:["D\xe9tails de l'appel d'offre N\xb0",t.id]})}),Object(_.jsx)(F.o,{children:Object(_.jsxs)(F.f,{children:[Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Autorit\xe9 contractante:"})," ",t.autorite.libelle]})}),Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Lieu d'acquisition:"})," ",t.lieu]})})]}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Type de march\xe9:"})," ",t.marche.libelle]})}),Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Date de publication:"})," ",t.publication.slice(0,10)]})})]})]})}),Object(_.jsx)(F.p,{children:Object(_.jsx)(F.d,{color:"secondary",onClick:e.reload,children:"Fermer"})})]})})),this.state.detailsOffre.map((function(t,a){return Object(_.jsxs)(F.n,{show:e.state.confirmation,size:"lg",children:[Object(_.jsx)(F.q,{children:Object(_.jsxs)(F.r,{children:["Suppression de l'appel d'offre N\xb0",t.id]})}),Object(_.jsx)(F.o,{children:Object(_.jsx)(F.f,{children:Object(_.jsxs)("p",{children:["Etes-vous s\xfbr de vouloir supprimer l'appel d'offre N\xb0",t.id]})})}),Object(_.jsxs)(F.p,{children:[Object(_.jsx)(F.d,{onClick:function(){e.deleteOffres(a,t.id)},color:"danger",children:"Supprimer"})," ",Object(_.jsx)(F.d,{color:"secondary",onClick:e.reload,children:"Annuler"})]})]})}))]})]})})}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{}),Object(_.jsx)(F.h,{}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})}),Object(_.jsx)(F.h,{children:Object(_.jsx)("p",{children:" "})})]}),Object(_.jsx)(L,{})]}):null}}]),a}(s.Component)),we=a(474),ye=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).getBadge=function(e){switch(e){case"en cours":return"success";case"expire":return"danger";default:return"success"}},s.handleChangeSelect=function(e){console.log(e.target.value),s.setState({marcheSelected:e.target.value})},s.handleChangeSelectAutorite=function(e){console.log(e.target.value),s.setState({autoriteSelected:e.target.value})},s.getMarches=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/type_marches",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({marches:a.map((function(e){return Object(y.a)({},e)}))}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.getAutorites=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/autorite_contractantes",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s.setState({autorites:a.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{adminClicked:!1})})),isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),s.handleFile=function(e){s.setState({selectedFile:e.target.files[0]})},s.toggleDetails=function(e){var t=s.state.details.indexOf(e),a=s.state.details.slice();-1!==t?a.splice(t,1):a=[].concat(Object(ve.a)(s.state.details),[e]),s.setState({details:a})},s.handleUdate=function(e){var t=new FormData;t.append("nom",s.state.libelle),t.append("ref","ghfgfh"),t.append("ouverture",s.state.selectedDay),t.append("lieu",s.state.lieu),t.append("marche",s.state.marcheSelected),t.append("autorite",s.state.autoriteSelected),s.state.detailsOffre.map((function(t,a){return Ne.a.put("https://mpublics.herokuapp.com/api/users/"+e,{libelle:""!==s.state.libelle?s.state.libelle:t.libelle,lieu:""!==s.state.lieu?s.state.lieu:t.lieu,limite:""!==s.state.selectedDay&&null!==s.state.selectedDay?s.state.selectedDay:t.limite}).then((function(e){s.reload(),console.log(e)}))}))},s.getBadge=s.getBadge.bind(Object(p.a)(s)),s.getOffres=s.getOffres.bind(Object(p.a)(s)),s.deleteOffres=s.deleteOffres.bind(Object(p.a)(s)),s.handleModal=s.handleModal.bind(Object(p.a)(s)),s.handleChangeSelect=s.handleChangeSelect.bind(Object(p.a)(s)),s.handleChangeLibelle=s.handleChangeLibelle.bind(Object(p.a)(s)),s.handleChangeLieu=s.handleChangeLieu.bind(Object(p.a)(s)),s.handleChangeSelectAutorite=s.handleChangeSelectAutorite.bind(Object(p.a)(s)),s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.getMarches=s.getMarches.bind(Object(p.a)(s)),s.getAutorites=s.getAutorites.bind(Object(p.a)(s)),s.reload=s.reload.bind(Object(p.a)(s)),s.handleFile=s.handleFile.bind(Object(p.a)(s)),s.handleUdate=s.handleUdate.bind(Object(p.a)(s)),s.toggleDetails=s.toggleDetails.bind(Object(p.a)(s)),s.logout=s.logout.bind(Object(p.a)(s)),s.getUsers=s.getUsers.bind(Object(p.a)(s)),s.deleteUsers=s.deleteUsers.bind(Object(p.a)(s)),s.state={details:[],selectedFile:null,large:!1,libelle:"",offres:[],users:[],isLoading:!1,idItem:null,detailsOffre:[],detailsUser:[],marches:[],autorites:[],marcheSelected:"",autoriteSelected:"",selectedDay:null,lieu:"",voirDetails:!1,confirmation:!1},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getOffres(),this.getUsers(),this.getMarches(),this.getAutorites()}},{key:"getOffres",value:function(){var e=Object(E.a)(w.a.mark((function e(){var t,a,s,n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=Object(q.a)(t),s=a.username,e.prev=3,this.setState({isLoading:!0}),e.next=7,fetch("ROLE_ADMIN"===g?"https://mpublics.herokuapp.com/api/appel_offres":"https://mpublics.herokuapp.com/api/appel_offres?autorite.user.email="+s,{headers:{Accept:"Application/json"}});case 7:return n=e.sent,e.next=10,n.json();case 10:c=e.sent,this.setState({offres:c.map((function(e){return Object(y.a)({},e)})),isLoading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),this.setState({isLoading:!1}),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(E.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({isLoading:!0}),e.next=4,fetch("https://mpublics.herokuapp.com/api/users",{headers:{Accept:"Application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,this.setState({users:a.map((function(e){return Object(y.a)({},e)})),isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.setState({isLoading:!1}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.clear()}},{key:"reload",value:function(){window.location.reload(!0)}},{key:"getDetailsOffres",value:function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({detailsOffre:this.state.offres.filter((function(e){return e.id===t}))});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDetailsUser",value:function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({detailsUser:this.state.users.filter((function(e){return e.id===t}))});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOffres",value:function(){var e=Object(E.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{fetch("https://mpublics.herokuapp.com/api/appel_offres/"+a,{method:"DELETE",headers:{Accept:"Application/json"}}).then((function(e){console.log(e),window.location.reload(!0)}))}catch(t){console.log(t)}console.log(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteUsers",value:function(){var e=Object(E.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{fetch("https://mpublics.herokuapp.com/api/users/"+a,{method:"DELETE",headers:{Accept:"Application/json"}}).then((function(e){console.log(e),window.location.reload(!0)}))}catch(t){console.log(t)}console.log(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleModal",value:function(){this.setState({large:!this.state.large})}},{key:"handleChangeLieu",value:function(e){this.setState({lieu:e.target.value})}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({selectedDay:e.target.value})}},{key:"handleChangeLibelle",value:function(e){this.setState({libelle:e.target.value})}},{key:"render",value:function(){var e=this;return!0===v&&"ROLE_ABONNE"!==g?Object(_.jsxs)("div",{children:[Object(_.jsx)(ge,{}),Object(_.jsxs)(we.a,{container:!0,children:[Object(_.jsx)(we.a,{item:!0,xs:12,children:Object(_.jsxs)("div",{children:[Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{xs:"12",lg:"12",children:Object(_.jsxs)(F.e,{children:[Object(_.jsx)(F.g,{children:"Liste des utilisateurs"}),Object(_.jsxs)(F.f,{children:[!0===this.state.isLoading?Object(_.jsx)("center",{children:Object(_.jsx)(F.u,{color:"info"})}):Object(_.jsx)(F.i,{clickableRows:!0,sorter:!0,items:this.state.users,fields:["id","nom","prenom","email","roles","modifier","supprimer"],columnFilter:!0,itemsPerPage:10,responsive:!0,tableFilter:!0,itemsPerPageSelect:!0,onRowClick:function(e){},pagination:!0,scopedSlots:{modifier:function(t,a){return"ROLE_ADMIN"===t.roles?Object(_.jsx)("td",{}):Object(_.jsx)("td",{className:"py-2",children:Object(_.jsx)(F.d,{color:"info",variant:"outline",shape:"square",size:"sm",onClick:function(){e.getDetailsUser(t.id),e.setState({large:!e.state.large})},children:"Modifier"})})},supprimer:function(t,a){return Object(_.jsx)("td",{className:"py-2",children:Object(_.jsx)(F.d,{color:"danger",variant:"outline",shape:"square",size:"sm",onClick:function(){e.getDetailsUser(t.id),e.setState({confirmation:!e.state.confirmation})},children:"Supprimer"})})}}}),this.state.detailsUser.map((function(t){return Object(_.jsxs)(F.n,{show:e.state.large,size:"lg",children:[Object(_.jsx)(F.q,{children:Object(_.jsxs)(F.r,{children:["Modification des informations de l'utilisateur N\xb0",t.id]})}),Object(_.jsx)(F.o,{children:Object(_.jsx)(F.f,{})}),Object(_.jsxs)(F.p,{children:[Object(_.jsx)(F.d,{onClick:function(){e.handleUdate(t.id)},color:"info",children:"Enregistrer"})," ",Object(_.jsx)(F.d,{color:"secondary",onClick:e.reload,children:"Retour"})]})]})})),this.state.detailsOffre.map((function(t){return Object(_.jsxs)(F.n,{show:e.state.voirDetails,size:"lg",children:[Object(_.jsx)(F.q,{closeButton:!0,children:Object(_.jsxs)(F.r,{children:["D\xe9tails de l'appel d'offre N\xb0",t.id]})}),Object(_.jsx)(F.o,{children:Object(_.jsxs)(F.f,{children:[Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Autorit\xe9 contractante:"})," ",t.autorite.libelle]})}),Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Lieu d'acquisition:"})," ",t.lieu]})})]}),Object(_.jsxs)(F.s,{children:[Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Type de march\xe9:"})," ",t.marche.libelle]})}),Object(_.jsx)(F.h,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Date de publication:"})," ",t.publication.slice(0,10)]})})]})]})}),Object(_.jsx)(F.p,{children:Object(_.jsx)(F.d,{color:"secondary",onClick:e.reload,children:"Fermer"})})]})})),this.state.detailsUser.map((function(t,a){return Object(_.jsxs)(F.n,{show:e.state.confirmation,size:"lg",children:[Object(_.jsx)(F.q,{children:Object(_.jsxs)(F.r,{children:["Suppression de l'utilisateur N\xb0",t.id]})}),Object(_.jsx)(F.o,{children:Object(_.jsx)(F.f,{children:Object(_.jsxs)("p",{children:["Etes-vous s\xfbr de vouloir supprimer l'appel d'offre N\xb0",t.id]})})}),Object(_.jsxs)(F.p,{children:[Object(_.jsx)(F.d,{onClick:function(){e.deleteUsers(a,t.id)},color:"danger",children:"Supprimer"})," ",Object(_.jsx)(F.d,{color:"secondary",onClick:e.reload,children:"Annuler"})]})]})}))]})]})})}),Object(_.jsx)(F.s,{children:Object(_.jsx)(F.h,{})})]})}),Object(_.jsx)(L,{})]})," "]}):null}}]),a}(s.Component);var Ee=function(){return Object(_.jsxs)(x.a,{children:[Object(_.jsxs)(I.c,{children:[Object(_.jsx)(I.a,{path:"/appels-doffres",exact:!0,component:pe}),Object(_.jsx)(I.a,{path:"/",exact:!0,component:R}),Object(_.jsx)(I.a,{path:"/services",component:P}),Object(_.jsx)(I.a,{path:"/products",component:M}),Object(_.jsx)(I.a,{path:"/contact-us",component:U}),Object(_.jsx)(I.a,{path:"/sign-up",component:z}),Object(_.jsx)(I.a,{path:"/passation",component:B}),Object(_.jsx)(I.a,{path:"/avis-generaux",component:K}),Object(_.jsx)(I.a,{path:"/connection",component:J}),Object(_.jsx)(I.a,{path:"/inscription",component:Oe}),Object(_.jsx)(I.a,{path:"/dashbord",component:Ce}),Object(_.jsx)(I.a,{path:"/liste-utilisateurs",component:ye}),Object(_.jsx)(I.a,{path:"/ajout-offres",component:ke})]}),Object(_.jsx)(xe,{scrollStepInPx:"50",delayInMs:"16.66"})]})};i.a.render(Object(_.jsx)(Ee,{}),document.getElementById("root"))},82:function(e,t,a){}},[[407,1,2]]]);
//# sourceMappingURL=main.ef18ca21.chunk.js.map